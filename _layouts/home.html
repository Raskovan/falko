---
layout: default
---

<div class="home">
  {%- if page.title -%}
    <h1 class="page-heading">{{ page.title }}</h1>
  {%- endif -%}

  {{ content }}

  {%- if site.posts.size > 0 -%}

    {% assign sort_cats =  site.categories | sort %}
    {% for cat in sort_cats %}
    {% assign the_cat =  cat | first %}
    <ul class="post-list">
    <h2 class="post-list-heading">{{ the_cat }}</h2>
    {% assign sort_tags =  site.tags | sort %}
     {% for tag in sort_tags %}
       {% assign the_tag =  tag | first %}
         {% assign cat_tag_posts = site.posts | where: "categories", the_cat | where: "tags", the_tag | reverse %}
           {% if cat_tag_posts.size > 0 %}
           <div class="post-meta">{{ the_tag }}</div>
           {% endif %}
         {% for post in  cat_tag_posts%}
         <li>
           <h3>
             <a class="post-link" href="{{ post.url | relative_url }}">
               {{ post.title | escape }}

               {% assign post_in_seconds = post.date | date: "%s" %}
               {% assign today_in_seconds = site.time | date: "%s" %}
               {% assign past_in_seconds = today_in_seconds | minus: post_in_seconds %}
               {% if past_in_seconds < 2678400 %}<sup class="post-new">new</sup>{% endif%}
             </a>
           </h3>
         </li>
         {% endfor %}
     {% endfor %}
     </ul>
    {% endfor %}

  {%- endif -%}

</div>
